<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.dbp.naemom.dao.GraphDAO">
  	<select id="getTotalSearchCount" resultType="int">
  		select count(sk_num) from search_keyword WHERE DATE(sk_date) = DATE(DATE_SUB(NOW(), INTERVAL 1 DAY))
  	</select>
  	
  	<select id="getSearchKeyword" resultType="kr.dbp.naemom.vo.SearchKeywordVO">
  		SELECT COUNT(sk_num) AS count, sk_keyword 
			FROM search_keyword 
			WHERE DATE(sk_date) = DATE(DATE_SUB(NOW(), INTERVAL 1 DAY))
			GROUP BY sk_keyword 
			ORDER BY count DESC 
			LIMIT #{count};
  	</select>

  	<select id="getTotalSearchCountM" resultType="int">
    SELECT COUNT(sk_num) FROM search_keyword WHERE sk_date >= DATE_SUB(NOW(), INTERVAL 7 DAY);
	</select>
	
	<select id="getSearchKeywordM" resultType="kr.dbp.naemom.vo.SearchKeywordVO">
	    SELECT COUNT(sk_num) AS count, sk_keyword
	    FROM search_keyword
	    WHERE sk_date >= DATE_SUB(NOW(), INTERVAL 7 DAY)
	    GROUP BY sk_keyword
	    ORDER BY count DESC
	    LIMIT #{count};
	</select>
	
	<select id="getTotalSearchCountY" resultType="int">
    SELECT COUNT(sk_num) FROM search_keyword WHERE sk_date >= DATE_SUB(NOW(), INTERVAL 1 YEAR);
	</select>
	
	<select id="getSearchKeywordY" resultType="kr.dbp.naemom.vo.SearchKeywordVO">
	    SELECT COUNT(sk_num) AS count, sk_keyword
	    FROM search_keyword
	    WHERE sk_date >= DATE_SUB(NOW(), INTERVAL 1 YEAR)
	    GROUP BY sk_keyword
	    ORDER BY count DESC
	    LIMIT #{count};
	</select>
</mapper>